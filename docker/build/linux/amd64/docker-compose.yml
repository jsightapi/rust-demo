version: '3.1'
services:
  builder:
    image: rust:buster
    container_name: rust-builder
    volumes:
      - ./../../../../src:/opt/app
      - ./../../../../lib/jsight-shared/1.0.0/linux/amd64:/opt/lib
    working_dir: /opt/app
    command:
      - /bin/sh
      - -c
      - |
        ln -sf /opt/app/lib/libjsight.so /usr/lib/libjsight.so
        tail -f /dev/null
    tty: true